Da das Ziel laut Bild ist:
`/Users/paminagrewe-remberg/recup_dir`

Wenn du das **Wachstums- oder Größen-Monitoring** des aktuellen Images oder Ausgabeordners sehen willst, nutze im Terminal:

Aktuelle Größe und Inhalt:

```
du -sh /Users/paminagrewe-remberg/recup_dir
```

Laufend aktualisiert (alle 5 Sekunden):

```
watch -n 5 'du -sh /Users/paminagrewe-remberg/recup_dir'
```

Wenn `watch` fehlt:

```
brew install watch
```



Einmalige Dateiliste mit Größen:

```
ls -lh /Users/paminagrewe-remberg/recup_dir
```

Damit siehst du, wie viele Daten PhotoRec bereits auf die interne SSD geschrieben hat und ob noch genug Speicher frei bleibt.



---



## Voraussetzungen und Grundregeln

* Schreibe **nichts** mehr auf den USB-Stick. Kein „Erste Hilfe“, kein Formatieren.
* Du brauchst auf der internen SSD **mindestens** so viel freien Speicher wie die Größe des Sticks, plus 10–20 % Reserve.
* Alles passiert im **Terminal**. Navigation in TestDisk/PhotoRec erfolgt per Pfeiltasten, Enter und den angegebenen Buchstaben.
* Wenn du bei einem Schritt unsicher bist, **abbrechen** und nachfragen.

---

## 1) Terminal öffnen

Spotlight öffnen: `⌘` + Leertaste, „Terminal“ tippen, Enter.
Ein Fenster „bash“ oder „zsh“ erscheint.

---

## 2) Xcode-CLI prüfen (benötigt für Homebrew)

Erklärung: Installiert Apple-Werkzeuge, damit Homebrew sauber bauen kann.
Wenn bereits vorhanden, kommt eine kurze Ausgabe. Wenn nicht, erscheint ein Dialog. Zustimmen und warten.

```
xcode-select --install
```

---

## 3) Prüfen, ob Homebrew vorhanden ist

Erklärung: Homebrew installiert gleich ddrescue und testdisk. Wenn keine Version erscheint, installierst du Brew im nächsten Schritt.

```
brew --version
```

---

## 4) Homebrew installieren (falls Schritt 3 keine Version zeigte)

Erklärung: Führt das offizielle Installationsskript aus. Nach Abschluss zeigt dir Brew evtl. PATH-Hinweise. Diese dann genau wie angezeigt ausführen.

```
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
```

---

## 5) Homebrew in den PATH aufnehmen (Apple Silicon, Standardpfad)

Nur nötig, wenn Brew-Befehle noch nicht gefunden werden und du einen Apple-Silicon-Mac hast. Danach Terminal einmal schließen und neu öffnen.

```
echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zprofile
```

```
eval "$(/opt/homebrew/bin/brew shellenv)"
```

---

## 6) Homebrew in den PATH aufnehmen (Intel-Mac, Standardpfad)

Nur nötig, wenn Brew-Befehle noch nicht gefunden werden und du einen Intel-Mac hast. Danach Terminal einmal schließen und neu öffnen.

```
echo 'eval "$(/usr/local/bin/brew shellenv)"' >> ~/.zprofile
```

```
eval "$(/usr/local/bin/brew shellenv)"
```

---

## 7) Systemcheck von Homebrew

Erklärung: Prüft, ob alles bereit ist.

```
brew doctor
```

---

## 8) ddrescue und TestDisk/PhotoRec installieren

Erklärung: ddrescue erstellt eine bitgenaue Kopie. testdisk/photorec retten Dateien.

```
brew install ddrescue
```

```
brew install testdisk
```

---

## 9) Freien Speicher prüfen

Erklärung: Stelle sicher, dass genug Platz für das Abbild vorhanden ist. Notiere „Available“.

```
df -h ~
```

---

## 10) USB-Stick identifizieren

Erklärung: Finde die Gerätebezeichnung. Suche nach einem Eintrag mit der **Größe** deines Sticks, z. B. 64 GB. Merke dir `diskX` (Beispiel: `/dev/disk2`).
Warnung: Verwechsele es **nicht** mit deiner Systemdisk (`/dev/disk0`).

```
diskutil list
```

---

## 11) Details zum gefundenen Stick prüfen

Erklärung: Prüfe, ob Größe und ggf. Name stimmen. Ersetze `disk2` durch deinen Wert.

```
diskutil info /dev/disk2
```

---

## 12) Stick komplett aushängen

Erklärung: ddrescue braucht exklusiven Zugriff. Ersetze `disk2`.

```
diskutil unmountDisk /dev/disk2
```

---

## 13) Zielordner auf dem Schreibtisch anlegen

Erklärung: Hier landen Image und Log.

```
mkdir -p ~/Desktop/usb_recovery
```

---

## 14) Ersten ddrescue-Durchlauf starten (schnell, ohne Retries)

Erklärung: Erstellt ein Abbild `usb.img` und ein Log `usb.log`. Ersetze `disk2`.
Dauert je nach Größe. Du siehst fortlaufend Statistik. Abbruch mit `Ctrl+C` jederzeit möglich, später fortsetzbar.

```
sudo ddrescue -n /dev/disk2 ~/Desktop/usb_recovery/usb.img ~/Desktop/usb_recovery/usb.log
```

---

## 15) Zweiten ddrescue-Durchlauf starten (mit Wiederholungen)

Erklärung: Liest problematische Sektoren erneut. `-r3` versucht es dreimal.
Bei Hardwarefehlern kann es länger dauern.

```
sudo ddrescue -r3 /dev/disk2 ~/Desktop/usb_recovery/usb.img ~/Desktop/usb_recovery/usb.log
```

---

## 16) Prüfen, dass das Image existiert und Größe plausibel ist

Erklärung: Die Größe sollte ungefähr der Stick-Kapazität entsprechen.

```
ls -lh ~/Desktop/usb_recovery/usb.img
```

---

## 17) TestDisk auf dem **Abbild** starten

Erklärung: Erst versuchen wir, Ordnerstruktur und Dateinamen zu retten.
Navigation gleich beschrieben.

```
testdisk ~/Desktop/usb_recovery/usb.img
```

### In TestDisk Schritt-für-Schritt

* „No Log“ oder „Create“ ist egal, nimm „Create“.
* Datenträger wird angezeigt. Bestätige mit Enter.
* „Partition table type“ meist automatisch korrekt. Bestätige mit Enter.
* Wähle **Analyse**, Enter.
* Wähle **Quick Search**, Enter.
* Wenn eine Partition gefunden wird, markiere sie.
* Drücke **p** um Dateien zu **p**eek-en (anzusehen).
* Wenn Dateien sichtbar sind, markiere Ordner/Dateien.
* Drücke **C** um sie zu **C**opy-en.
* Wähle Zielordner, z. B. `~/Desktop/usb_recovery/recovered_testdisk`.
* Bestätige die Kopie. Warte bis „Copy done“.

Wenn Quick Search nichts findet:

* Wähle **Deeper Search**, Enter. Warte. Danach erneut mit **p** prüfen und mit **C** kopieren.

**Wichtig:**

* Nutze **niemals** „Write“ auf dem Originalstick. Wenn TestDisk dir „Write“ anbietet, **nur** auf dem Abbild und nur wenn du sicher bist. Für reine Rettung reicht Kopieren.

Beenden: `q` mehrmals drücken, bis TestDisk schließt.

---

## 18) Wenn Struktur nicht rettbar war: PhotoRec auf dem **Abbild** starten

Erklärung: PhotoRec ignoriert das Dateisystem und sucht Dateisignaturen. Dateinamen/Ordner gehen verloren, Inhalte werden gerettet.

```
photorec ~/Desktop/usb_recovery/usb.img
```

### In PhotoRec Schritt-für-Schritt

* Wähle das Medium (zeigt `usb.img`). Enter.
* Wähle die Partition oder „Whole disk“, Enter.
* Menü **File Opt** öffnen. Enter.

  * Mit Pfeiltasten zu den Typen gehen.
  * Mit Leertaste **nur** Relevantes aktivieren:

    * Fotos: `jpg` `jpeg` `png` `heic` ggf. `cr2`/`arw` falls RAW.
    * Texte/Dokumente: `txt` `rtf` `pdf` `docx` `xlsx` `pptx` je nach Bedarf.
  * Mit `b` kannst du die Auswahl als Standard speichern (optional).
  * Mit `q` zurück.
* Menü **Options** öffnen. Enter.

  * „Keep corrupted files“ auf **No**.
  * „Paranoid“ auf **No** (Standard).
  * Mit `q` zurück.
* **Search** wählen. Enter.
* **Other** wählen für FAT/exFAT/HFS+. Für APFS ist „Other“ korrekt, PhotoRec arbeitet signaturbasiert. Enter.
* Zielordner wählen, z. B.: `~/Desktop/usb_recovery/recovered_photorec`. Erstelle ihn vorher, falls nicht vorhanden.
* Start bestätigen. Warten, bis „Recovery completed“ erscheint.

---

## 19) Zielordner vorher anlegen (falls noch nicht geschehen)

Erklärung: So kannst du ihn in PhotoRec auswählen.

```
mkdir -p ~/Desktop/usb_recovery/recovered_photorec
```

---

## 20) Abbild schreibgeschützt einhängen (nur zur Info-Prüfung, optional)

Erklärung: **Nicht** reparieren. Nur Informationen ansehen. macOS weist dem Image ein `/dev/diskY` zu.

```
hdiutil attach -nomount ~/Desktop/usb_recovery/usb.img
```

---

## 21) Neues Geräte-Mapping prüfen (optional)

Erklärung: Du siehst z. B. `/dev/disk3`. Nur Info.

```
diskutil list
```

---

## 22) Dateisystem-Infos lesen (optional, read-only)

Erklärung: Ersetzt `disk3` durch die tatsächliche Nummer des vorherigen Schritts. Nur Info, kein Reparaturversuch.

```
diskutil info /dev/disk3
```

---

## 23) Image wieder aushängen (wenn du es angehängt hattest)

Erklärung: Sauber schließen.

```
hdiutil detach /dev/disk3
```

---

## 24) Ergebnisse sichten und nachbereiten

Erklärung: In `recovered_testdisk` findest du ggf. intakte Ordnerstrukturen. In `recovered_photorec` liegen Dateien in Unterordnern (`recup_dir.*`).
Du kannst nach Typ und Inhalt filtern. Beispiel: Alle JPGs anzeigen.

```
open ~/Desktop/usb_recovery/recovered_photorec
```

---

## 25) Typische Situationen und was sie bedeuten

* **TestDisk zeigt Dateien, Kopie klappt:** Dateisystem oder Partitionseinträge waren beschädigt, Daten intakt. Gute Rettungschancen.
* **TestDisk findet nichts, PhotoRec findet viel:** Metadaten stark beschädigt oder APFS. Inhalte ok, Dateinamen verloren.
* **ddrescue meldet viele „bad sectors“:** Hardwareproblem des Sticks. Rettung per PhotoRec oft noch möglich, aber unvollständig.
* **PhotoRec erzeugt sehr viele kleine Fragmente:** Schalte in „File Opt“ unnötige Typen ab, um Müll zu vermeiden.
* **Nicht genug Speicher:** Verschiebe `usb.img` und die `recovered_*` Ordner auf ein externes Laufwerk mit genug Platz und wiederhole den Schritt mit korrektem Pfad.

---

## 26) Sicherheitstipps

* Nutze **niemals** `diskutil eraseDisk` oder „Löschen“ im Festplattendienstprogramm auf dem Originalstick, bevor du mit dem Abbild fertig bist.
* Arbeite **immer** auf `usb.img`, nicht am echten `/dev/diskX`.
* Bewahre `usb.log` auf. Damit kannst du ddrescue jederzeit fortsetzen.

---

## 27) Aufräumen, wenn du fertig bist

Erklärung: Nur ausführen, wenn du sicher alles gesichert hast. Löscht das große Image und alle Rettungsdaten.

```
rm -i ~/Desktop/usb_recovery/usb.img
```

```
rm -ri ~/Desktop/usb_recovery/recovered_testdisk
```

```
rm -ri ~/Desktop/usb_recovery/recovered_photorec
```

---

## 28) Wenn du mir Daten lieferst, gebe ich Ziel-Einstellungen zurück

* Ausgabe von `diskutil list` mit der Zeile deines Sticks.
* Ausgabe von `diskutil info /dev/diskX` mit Größe und möglichen Hinweisen auf das Dateisystem.
* Kurze Info, ob dir eher **Namen/Ordner** wichtig sind (TestDisk zuerst) oder **nur Inhalte** (PhotoRec-Filter enger setzen).

So bekommst du eine passgenaue Taste-für-Taste-Anleitung für deinen Fall.
